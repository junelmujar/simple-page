(function(e){"use strict";e.fn.simplePage=function(t){function v(t){e(t).children().each(function(){e(this).removeClass("current disabled")})}function m(e,t){return Math.ceil(e/t)}function g(t,n){v(t);e(t+" > "+n).addClass("current disabled")}function y(t){e(n.control_class+" .sp-current-page > span").html(t+" of "+n.total_pages)}function b(t,r,i,a){e(n.control_class+" .sp-current-page > span").html("Loading...");if(n.preloader===true){e(".sp-data").html(u)}e.ajax({url:n.source,type:"POST",dataType:"json",data:{page:t,pages:n.per_page,keyword:r,sortby:i,direction:a}}).done(function(r){var i,u,a;u=e(n.template).html();a=Handlebars.compile(u);i=a(r.result);if(r.total>0){n.total_pages=m(r.total,n.per_page);y(t);s=r.sort_by;o=r.sort_direction;e(".sp-sort").fadeIn();e(".sp-pager").fadeIn();e(".sp-container").fadeIn();if(n.total_pages===1){g(n.control_class,".first, .prev, .last, .next")}}else{r.result=null;e(n.control_class+" .sp-current-page > span").html("0 Found");if(r.mode=="list"){e(".sp-container").hide()}else{e(".sp-sort").hide();e(".sp-pager").hide()}g(n.control_class,".first, .prev, .last, .next")}e(".sp-data").html(a({data:r.result}));if(typeof n.callback==="function"){n.callback.call(this)}})}var n,r,i,s,o,u,a,f,l,c,h,p,d;u='<div class="sp-preloader"><img src="482.gif" /></div>';a="DESC";f='<div class="row sp-container">'+'<div class="col-lg-6 col-md-5 col-sm-5">'+'<div class="sp-pager-container">_pager_ctrl_</div>'+"</div>"+'<div class="col-lg-6 col-md-7 col-sm-7">'+'<form role="form" class="sp-search form-inline pull-right hidden-xs">'+"_filter_ctrl_"+"_sort_ctrl_"+'<div class="form-group">'+'<input type="text" class="form-control sp-keyword" placeholder="Search..." />'+"</div> "+'<input type="submit" name="submit" value="Go" class="btn btn-default sp-keyword-submit">'+"</form>"+"</div>"+"</div>";l='<div class="sp-pager btn-group">'+'<a href="#" class="btn btn-default first">Last</a> '+'<a href="#" class="btn btn-default prev">Prev</a>'+'<a href="#" class="sp-current-page btn btn-default disabled"><span></span></a>'+'<a href="#" class="btn btn-default next">Next</a> '+'<a href="#" class="btn btn-default last">First</a>'+"</div>";c='<div class="row sp-data"></div>';o=a;n=e.extend({source:"",template:"",template_data:"",sort_fields:null,filter_fields:null,current_page:1,per_page:10,total_items:100,pager_top:true,pager_bottom:false,preloader:false,callback:null},t);e(this).empty();if(n.filter_fields){h='<div class="btn-group sp-filter _filter_position_">'+'<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">'+'Filter <i class="caret"></i>'+"</button>"+'<ul class="dropdown-menu sp-filter-control" role="menu"  style="width: 200px;">_filter_items_</ul>'+"</div> ";d="";e.each(n.filter_fields,function(t,n){e.each(n,function(t,n){d+='<li class="dropdown-header sp-dropdown-header">'+t+"</li>";e.each(n,function(e,t){d+='<li><a href="#" data-index="'+e+'" data-text="'+t+'">'+t+"</a></li>"})})});h=h.replace("_filter_items_",d);f=f.replace("_filter_ctrl_",h)}else{f=f.replace("_filter_ctrl_","")}if(n.sort_fields){p='<div class="btn-group sp-sort _sort_position_">'+'<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">'+'Sort <i class="caret"></i>'+"</button>"+'<ul class="dropdown-menu sp-sort-control" role="menu" style="width: 200px;">_sort_items_</ul>'+"</div> ";d="";e.each(n.sort_fields,function(e,t){d+='<li><a href="#" data-index="'+e+'" data-text="'+t+'">'+t+"</a></li>"});p=p.replace("_sort_items_",d);f=f.replace("_sort_ctrl_",p)}else{f=f.replace("_sort_ctrl_","")}if(n.pager_top){f=f.replace("_drop_direction_","");f=f.replace("_pager_ctrl_",l);e(this).append(f)}if(n.template_data!==""){e(this).append(n.template_data)}else{e(this).append(c)}if(n.pager_bottom){f=f.replace("_sort_position_","dropup");f=f.replace("_filter_position_","dropup");f=f.replace("_pager_ctrl_",l);e(this).append(f)}if(n.sort_fields){e(".sp-sort-control > li a").bind("click",function(t){t.preventDefault();var u;u=e(this).attr("data-index");if(u){if(u===s){switch(o){case"DESC":i='<span class="pull-right label label-warning">ASC</span>';o="ASC";break;case"ASC":i='<span class="pull-right label label-warning">DESC</span>';o="DESC";break}}else{i='<span class="pull-right label label-warning">DESC</span>';o=a}b(n.current_page,r,u,o);s=u}e(".sp-sort-control > li a").each(function(){e(this).parent().removeClass("active-dark");e(this).html(e(this).attr("data-text"))});e(this).parent().addClass("active-dark");e(this).html(e(this).attr("data-text")+i)})}if(n.filter_fields){e(".sp-filter-control > li a").bind("click",function(e){e.preventDefault()})}n.control_class=".sp-pager";e(n.control_class+" > .first").bind("click",function(e){e.preventDefault();n.current_page=1;g(n.control_class,".first, .prev");b(n.current_page,r)});e(n.control_class+" > .last").bind("click",function(e){e.preventDefault();n.current_page=n.total_pages;g(n.control_class,".last, .next");b(n.current_page,r)});e(n.control_class+" > .next").bind("click",function(e){e.preventDefault();if(n.current_page<n.total_pages-1){n.current_page++;v(n.control_class)}else{n.current_page=n.total_pages;g(n.control_class,".last, .next")}b(n.current_page,r)});e(n.control_class+" > .prev").bind("click",function(e){e.preventDefault();if(n.current_page-1>1){n.current_page--;v(n.control_class)}else{n.current_page=1;g(n.control_class,".prev, .first")}b(n.current_page,r)});e(".sp-container .sp-keyword-submit").bind("click",function(t){t.preventDefault();r=e(".sp-keyword").val();n.current_page=1;g(n.control_class,".first, .prev");b(n.current_page,r)});return this.each(function(){if(n.current_page===1){b(n.current_page);g(n.control_class,".first, .prev");e(".sp-sort").hide();e(".sp-pager").hide()}})}})(jQuery)